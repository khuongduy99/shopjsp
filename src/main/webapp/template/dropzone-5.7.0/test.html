<!DOCTYPE html>
<html>
<head>
	<title></title>
	<title>How to Upload a File using Dropzone.js with PHP</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>        
  <link rel="stylesheet" href="dist/dropzone.css" />
  <script src="dist/dropzone.js"></script>
</head>
<body>
	<div class="container">
   <br />
   <h3 align="center">How to Upload a File using Dropzone.js with PHP</h3>

<form action="/file-upload" class="dropzone" id="aelement"></form>
<form action="/file-upload" class="dropzone" id="an-other-form-element"></form>


   <div align="center">
    <button type="button" class="btn btn-info" id="submit-all">Upload</button>
   </div>
   <br />
   <br />
   <div id="preview"></div>
   <br />
   <br />
  </div>


<script type="text/javascript">
  $(document).ready(function(){
 
Dropzone.options.aelement = {
	maxFiles:1,
init: function() {
	var submitButton = document.querySelector("#SaveImage");
                var dropzoneForm = this;

                submitButton.addEventListener("click", function () {                   
                        dropzoneForm.processQueue();                   
                });
      this.on("addedfile", function (file) {
                    if (this.files[1] != null) {
                        this.removeFile(this.files[0]);
                    }                    
                    
                });
      this.on("success",
                    function (file) {                      
                       
                        dropzoneForm.removeFile(file);                                                                 
                       
                    });
},
  autoProcessQueue: false,
  acceptedFiles:".png,.jpg,.gif,.bmp,.jpeg",
  init: function(){
   var submitButton = document.querySelector('#submit-all');
   myDropzone = this;
   submitButton.addEventListener("click", function(){
    myDropzone.processQueue();
   });
   this.on("complete", function(){
    if(this.getQueuedFiles().length == 0 && this.getUploadingFiles().length == 0)
    {
     var _this = this;
     _this.removeAllFiles();
    }
    list_image();
   });
  },
 };


 
});
</script>
</body>
</html>